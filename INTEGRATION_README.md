# JobBot AI - Integrated Job Search & Interview Platform

This project integrates two applications into a unified platform:
- **36hr** - Job Search Application (Python/FastAPI backend)
- **36hrs** - AI Mock Interviewer (Voice-based interview simulation)

## ğŸ¯ Key Features

### Job Search Features (Original 36hr)
- Resume parsing and profile creation via AI
- AI-powered job search with Gemini chat assistant
- Job saving and application tracking
- Chat-based job recommendations and career guidance

### Interview Preparation Features (Integrated from 36hrs)
- **Job-Specific Mock Interviews**: Generate practice interviews tailored to saved/applied jobs
- **Custom Interviews**: Create interviews for any topic or skill area
- **Voice-Based Interviews**: Real-time voice conversations with AI interviewers using Retell AI
- **Multiple AI Interviewers**: Choose from different interviewer personalities with unique traits
- **AI-Generated Questions**: Questions generated by Gemini based on job requirements or objectives
- **Performance Analytics**: Get feedback on communication skills, technical knowledge, and more
- **Interview History**: Track all your practice sessions with detailed analytics
- **Tab Switch Detection**: Monitor focus during interview sessions

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  React Frontend (Vite)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Job Search â”‚   Chat Assistant     â”‚   Interview Prep        â”‚
â”‚   Pages    â”‚     (JobBot)         â”‚     Module              â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                 â”‚                       â”‚
      â–¼                 â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 FastAPI Backend (Python)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Job Search APIs      â€¢ Chat APIs                          â”‚
â”‚ â€¢ Interview APIs       â€¢ Retell AI Integration              â”‚
â”‚ â€¢ Question Generation  â€¢ Analytics & Feedback               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                         â”‚
      â–¼                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MongoDB    â”‚                    â”‚      Retell AI          â”‚
â”‚ (All Data)   â”‚                    â”‚ (Voice Conversations)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Project Structure

```
36hr/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py              # FastAPI app with all endpoints
â”‚   â”œâ”€â”€ models.py            # Pydantic models (jobs + interviews)
â”‚   â”œâ”€â”€ db.py                # MongoDB connection
â”‚   â”œâ”€â”€ chat_service.py      # Gemini chat integration
â”‚   â”œâ”€â”€ interview_service.py # Interview & Retell AI integration (NEW)
â”‚   â”œâ”€â”€ jsearch_client.py    # Job search API client
â”‚   â”œâ”€â”€ gemini_client.py     # Gemini AI client
â”‚   â””â”€â”€ requirements.txt     # Python dependencies
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx          # Main app with routes
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ HomePage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfilePage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ JobCard.tsx           # Updated with "Prepare Interview" button
â”‚   â”‚   â”‚   â”œâ”€â”€ InterviewPrepPage.tsx # NEW: Interview dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ InterviewRoomPage.tsx # NEW: Voice interview room
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â””â”€â”€ api.ts       # API functions (jobs + interviews)
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ README.md                # Quick start guide
â”œâ”€â”€ documentation.md         # Full technical documentation
â””â”€â”€ INTEGRATION_README.md    # This file
```

## ğŸš€ Setup Instructions

### Prerequisites
- Python 3.9+
- Node.js 18+
- MongoDB (local or cloud)
- Retell AI Account (for voice interviews)
- Google Gemini API Key
- JSearch API Key (RapidAPI)

### Backend Setup

1. Navigate to backend:
```bash
cd 36hr/backend
```

2. Create virtual environment:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# or
venv\Scripts\activate     # Windows
```

3. Install dependencies:
```bash
pip install -r requirements.txt
```

4. Create `.env` file:
```env
MONGODB_URI=mongodb://localhost:27017/jobbot
GEMINI_API_KEY=your_gemini_api_key
JSEARCH_API_KEY=your_jsearch_api_key
RETELL_API_KEY=your_retell_api_key
RETELL_AGENT_ID_1=your_agent_id_1
RETELL_AGENT_ID_2=your_agent_id_2
RETELL_AGENT_ID_3=your_agent_id_3
```

5. Run the server:
```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### Frontend Setup

1. Navigate to frontend:
```bash
cd 36hr/frontend
```

2. Install dependencies:
```bash
npm install
```

3. Run development server:
```bash
npm run dev
```

## ğŸŒ Application Routes

| Route | Component | Description |
|-------|-----------|-------------|
| `/` | OnboardingPage | Resume upload and profile setup |
| `/home` | HomePage | Dashboard with quick actions |
| `/chat/:chatId` | ChatPage | AI chat for job search |
| `/profile` | ProfilePage | User profile management |
| `/interview-prep` | InterviewPrepPage | Interview preparation dashboard |
| `/interview/:interviewId` | InterviewRoomPage | Voice interview room |

## ğŸ”Œ API Endpoints

### Job Search APIs (Existing)
| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/onboardFileUpload` | POST | Upload and parse resume |
| `/api/confirmOnboardingDetails` | POST | Save user profile |
| `/api/chatHistoryRequest` | GET | Get chat history |
| `/api/createChat` | POST | Create new chat session |
| `/api/sendMessage` | POST | Send message to chatbot |
| `/api/getChatMessages` | GET | Get messages for a chat |
| `/api/saveJob` | POST | Save a job |
| `/api/unsaveJob` | POST | Unsave a job |
| `/api/applyJob` | POST | Apply to a job |
| `/api/getSavedJobs` | GET | Get saved jobs |
| `/api/getAppliedJobs` | GET | Get applied jobs |
| `/api/updateUserProfile` | POST | Update user profile |

### Interview APIs (New)
| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/interviewers` | GET | Get available AI interviewers |
| `/api/createInterview` | POST | Create custom interview |
| `/api/createJobInterview` | POST | Create job-specific interview |
| `/api/interviews` | GET | Get user's interviews |
| `/api/interview/{id}` | GET | Get interview details |
| `/api/registerCall` | POST | Register Retell voice call |
| `/api/updateInterviewResponse` | POST | Update interview response |
| `/api/interviewHistory` | GET | Get practice history |
| `/api/analyzeInterview` | POST | Analyze interview performance |
| `/api/submitInterviewFeedback` | POST | Submit feedback |
| `/api/generateInterviewObjective` | POST | AI-generate interview objective |
| `/api/retellWebhook` | POST | Webhook for Retell callbacks |

## ğŸ® User Flows

### Job Search Flow
1. **Onboarding**: Upload resume â†’ AI extracts profile â†’ Confirm details
2. **Job Discovery**: Chat with JobBot â†’ Search jobs â†’ View details
3. **Job Management**: Save jobs â†’ Apply to jobs â†’ Track applications

### Interview Prep Flow
1. **From Job Card**: Click "Prepare Interview" on any job card
2. **AI Objective**: System generates interview objective based on job
3. **Configure**: Select interviewer, question count, duration
4. **Start Interview**: Enter voice interview room
5. **Practice**: Have voice conversation with AI interviewer
6. **Review**: View analytics and feedback after completion

### Custom Interview Flow
1. **Navigate**: Go to Interview Prep page
2. **Create Custom**: Click "Create Custom Interview"
3. **Configure**: Enter name, objective, select interviewer
4. **Generate**: AI generates relevant questions
5. **Practice**: Complete voice interview
6. **Analyze**: Review performance metrics

## ğŸ”§ MongoDB Collections

### users collection (enhanced)
```javascript
{
  email: "user@example.com",
  name: "John Doe",
  phone: "555-1234",
  location: "San Francisco, CA",
  skills: ["JavaScript", "Python", "React"],
  experience: ["3 years at TechCorp as Frontend Developer"],
  profile_summary: "Experienced developer...",
  resumeUploaded: true,
  saved_jobs: [
    { job_id: "123", job_title: "Software Engineer", company_name: "Google", job_link: "..." }
  ],
  applied_jobs: [
    { job_id: "456", job_title: "Frontend Developer", company_name: "Meta", applied_at: "2024-01-15" }
  ],
  chat_history: [
    { chat_id: "abc123", chat_name: "Job Search", messages: [...], context: {...} }
  ],
  interviews: [
    { interview_id: "int123", created_at: "2024-01-15T10:00:00Z" }
  ]
}
```

### interviews collection (new)
```javascript
{
  id: "interview_id",
  user_email: "user@example.com",
  name: "Frontend Developer Interview",
  objective: "Assess React and JavaScript skills for frontend role",
  interviewer_id: 1,
  questions: [
    { id: "q1", question: "Explain React hooks and their benefits", follow_up_count: 2 },
    { id: "q2", question: "How do you handle state management?", follow_up_count: 1 }
  ],
  job_id: "job_123",        // optional - for job-specific interviews
  job_title: "Frontend Developer",
  company_name: "TechCorp",
  question_count: 5,
  time_duration: "10",       // minutes
  is_active: true,
  response_count: 0,
  created_at: "2024-01-15T10:00:00Z"
}
```

### interview_responses collection (new)
```javascript
{
  id: "response_id",
  interview_id: "interview_id",
  call_id: "retell_call_id",
  name: "John Doe",
  email: "user@example.com",
  duration: 600,             // seconds
  transcript: [...],         // conversation transcript
  is_ended: true,
  is_analysed: true,
  analytics: {
    overall_score: 8,
    communication_score: 7,
    technical_score: 9,
    confidence_score: 8,
    strengths: ["Clear explanations", "Good technical depth"],
    improvements: ["Could elaborate more on examples"],
    summary: "Strong performance overall..."
  },
  created_at: "2024-01-15T10:30:00Z"
}
```

### interview_feedback collection (new)
```javascript
{
  interview_id: "interview_id",
  email: "user@example.com",
  feedback: "Great experience! The AI interviewer was very realistic.",
  satisfaction: 5,           // 1-5 scale
  created_at: "2024-01-15T11:00:00Z"
}
```

## ğŸ­ AI Interviewers

The system includes multiple AI interviewer personalities:

| ID | Name | Personality | Voice | Best For |
|----|------|-------------|-------|----------|
| 1 | Alex | Professional & Thorough | Professional male | Technical interviews |
| 2 | Sarah | Friendly & Encouraging | Warm female | Behavioral interviews |
| 3 | Michael | Direct & Challenging | Authoritative male | Senior-level interviews |

Each interviewer has configurable traits:
- **Empathy**: How understanding and supportive they are
- **Exploration**: How deeply they probe into answers
- **Rapport Building**: How they establish connection
- **Professionalism**: Formality level of interaction

## ğŸ”‘ Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `MONGODB_URI` | MongoDB connection string | âœ… |
| `GEMINI_API_KEY` | Google Gemini API key | âœ… |
| `JSEARCH_API_KEY` | JSearch API key (RapidAPI) | âœ… |
| `RETELL_API_KEY` | Retell AI API key | âœ… |
| `RETELL_AGENT_ID_1` | First interviewer's Retell agent ID | âœ… |
| `RETELL_AGENT_ID_2` | Second interviewer's Retell agent ID | Optional |
| `RETELL_AGENT_ID_3` | Third interviewer's Retell agent ID | Optional |

## ğŸ“ Technical Notes

- **Database**: MongoDB for all data storage (migrated from original Supabase schema)
- **Voice AI**: Retell AI requires creating agents through their dashboard before use
- **Question Generation**: Interview questions generated using Gemini AI based on job requirements
- **Browser Requirements**: Voice interviews require microphone access permission
- **Real-time Updates**: WebSocket connection for live transcript during interviews
- **Dark Theme**: Interview room uses dark theme for focus; custom CSS classes handle text visibility

## ğŸ› Known Issues & Solutions

1. **Text not visible on interview page**: Uses custom `text-force-*` CSS classes to override global styles
2. **Modal positioning**: Interview creation modal uses high z-index (9999) for proper layering
3. **Tab detection**: Browser visibility API used for tab switch monitoring

## ğŸ”® Future Improvements

- [ ] Add video interview support
- [ ] Implement collaborative interview review
- [ ] Add interview scheduling with calendar integration
- [ ] Export analytics reports as PDF
- [ ] Add interview recording playback
- [ ] Implement interview templates
- [ ] Add multi-language support
